<%- extend('../base_admin') -%>

  <div class="row">
    <div class="col-md-12">
      <div class="card mb-4">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">
            <i class="bx bx-user me-1"></i>
            Détails du client
            <b>
              <%= xclient.lastname %>
            </b>
          </h5>
          <a 
            href="<%= routedebase %>/client_management/client_list" 
            class="dt-button btn btn-outline-secondary">
            <span>
              Retour
          </a>
        </div>
        
        <!-- Account -->
        <div class="card-body">
          <div class="d-flex align-items-start align-items-sm-center gap-4">
            <div class="button-wrapper">
              <a class="btn btn-primary" href="<%= routedebase %>/client_management/edit_client/<%= xclient.id %>">
                <i class="bx bx-pencil me-2"></i>
                Modifier le client
              </a>
              <% if (xclient.is_active) { %>
                <a class="btn btn-warning" href="<%= routedebase %>/client_management/disable_admin/<%= xclient.id %>">
                  <i class="bx bx-x me-2"></i>
                  Désactiver le client
                </a>
              <% } else { %>
                <a class="btn btn-success" href="<%= routedebase %>/client_management/enable_admin/<%= xclient.id %>">
                  <i class="bx bx-x me-2"></i>
                  Activer le client
                </a>
              <% } %>
            </div>
          </div>
        </div>
        <hr class="my-0" />
        <div class="card-body">
          <form id="" onsubmit="return false">
            <div class="row">
              <div class="mb-3 col-md-6">
                <label class="form-label" for="code">Code</label>
                <div class="input-group input-group-merge">
                  <span id="code_icon" class="input-group-text"><i class="bx bx-buildings"></i></span>
                  <input type="text" id="code" name="code" class="form-control" disabled value="<%= xclient.code %>" />
                </div>
              </div>
              <div class="mb-3 col-md-6">
                <label class="form-label" for="username">Nom d'utilisateur</label>
                <div class="input-group input-group-merge">
                  <span id="username_icon" class="input-group-text"><i class="bx bx-buildings"></i></span>
                  <input type="text" id="username" name="username" class="form-control" disabled value="<%= xclient.username %>" />
                </div>
              </div>
              <div class="mb-3 col-md-6">
                <label class="form-label" for="lastname">Nom</label>
                <div class="input-group input-group-merge">
                  <span id="lastname_icon" class="input-group-text"><i class="bx bx-buildings"></i></span>
                  <input type="text" id="lastname" name="lastname" class="form-control" disabled value="<%= xclient.lastname %>" />
                </div>
              </div>
              <div class="mb-3 col-md-6">
                <label class="form-label" for="firstname">Prenom</label>
                <div class="input-group input-group-merge">
                  <span id="firstname_icon" class="input-group-text"><i class="bx bx-buildings"></i></span>
                  <input type="text" id="firstname" name="firstname" class="form-control" disabled value="<%= xclient.firstname %>" />
                </div>
              </div>
              <div class="mb-3 col-md-6">
                <label class="form-label" for="email">Email</label>
                <div class="input-group input-group-merge">
                  <span id="email_icon" class="input-group-text"><i class="bx bx-envelope"></i></span>
                  <input type="email" id="email" name="email" class="form-control" disabled
                    value="<%= xclient.email %>" />
                </div>
              </div>
              <div class="mb-3 col-md-6">
                <label class="form-label" for="phone">Telephone </label>
                <div class="input-group input-group-merge">
                  <span id="phone2" class="input-group-text"><i class="bx bx-phone"></i></span>
                  <input type="text" id="phone" name="phone" class="form-control phone-mask" disabled
                    value="<%= xclient.phone %>" />
                </div>
              </div>
              <div class="mt-2">
                <a class="btn btn-outline-danger account-image-reset mb-4"
                  href="<%= routedebase %>/client_management/reset_password/<%= xclient.id %>">
                  <i class="bx bx-reset me-2"></i>
                  <span>
                    Réinitialiser le mot de passe
                  </span>
                </a>
              </div>
            </div>
          </form>
        </div>
        <!-- /Account -->
      </div>
      <div class="card">
        <h5 class="card-header">Suppression du client</h5>
        <div class="card-body">
          <div class="mb-3 col-12 mb-0">
            <div class="alert alert-warning">
              <h6 class="alert-heading fw-bold mb-1">
                Êtes-vous sûr de vouloir supprimer ce client ?
              </h6>
              <p class="mb-0">
                <strong>Note:</strong> Cette action est irréversible. Toutes les données associées à ce client seront supprimées. Si vous souhaitez simplement désactiver le client, vous pouvez le faire dans la section plus haut. Si vous souhaitez vraiment supprimer le client, veuillez cocher la case ci-dessous et cliquer sur le bouton "Supprimer le client".
              </p>
            </div>
          </div>
          <form method="post" action="<%= routedebase %>/client_management/delete_client/<%= xclient.id %>">
            <div class="form-check mb-3">
              <input class="form-check-input" type="checkbox" name="confirmation" id="confirmation" value="true"
                required />
              <label class="form-check-label" for="confirmation">
                Je confirme que je souhaite supprimer ce xclient.
              </label>
            </div>
            <button type="submit" class="btn btn-danger">
              <i class="bx bx-trash me-1"></i>
              Supprimer le client
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>